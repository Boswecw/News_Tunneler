# =============================================================================
# News Tunneler Backend - Production Environment Configuration
# =============================================================================
#
# IMPORTANT: This is a template for production deployment.
# 1. Copy this file to .env
# 2. Replace all placeholder values with actual production values
# 3. NEVER commit the actual .env file to version control
# 4. Use strong, cryptographically-secure secrets (see generation commands below)
#
# Generate secrets:
# python -c "from app.core.secrets import SecretsValidator; print(SecretsValidator.generate_secret_key(64))"
#
# =============================================================================

# -----------------------------------------------------------------------------
# Environment & Debug
# -----------------------------------------------------------------------------
ENV=production
DEBUG=false
PORT=8000

# -----------------------------------------------------------------------------
# Database (PostgreSQL - REQUIRED for production)
# -----------------------------------------------------------------------------
USE_POSTGRESQL=true
POSTGRES_HOST=your-postgres-host.rds.amazonaws.com
POSTGRES_PORT=5432
POSTGRES_DB=news_tunneler
POSTGRES_USER=news_tunneler
# CRITICAL: Generate a strong password (32+ characters)
# Example: python -c "import secrets; print(secrets.token_urlsafe(32))"
POSTGRES_PASSWORD=REPLACE_WITH_STRONG_PASSWORD_MIN_32_CHARS
POSTGRES_POOL_SIZE=10
POSTGRES_MAX_OVERFLOW=20
# SSL mode for PostgreSQL connection
POSTGRES_SSLMODE=require

# -----------------------------------------------------------------------------
# Authentication & Security (CRITICAL)
# -----------------------------------------------------------------------------
# CRITICAL: Generate a strong secret key (64+ characters)
# Command: python -c "from app.core.secrets import SecretsValidator; print(SecretsValidator.generate_secret_key(64))"
JWT_SECRET_KEY=REPLACE_WITH_64_CHAR_SECRET
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# CRITICAL: Enable authentication in production
REQUIRE_AUTH=true

# Set to false after creating admin user
ALLOW_REGISTRATION=false

# -----------------------------------------------------------------------------
# Redis Cache
# -----------------------------------------------------------------------------
REDIS_ENABLED=true
REDIS_HOST=your-redis-host.cache.amazonaws.com
REDIS_PORT=6379
REDIS_DB=0
# Optional: Redis password if using AUTH
REDIS_PASSWORD=

# -----------------------------------------------------------------------------
# RSS Feed Polling
# -----------------------------------------------------------------------------
POLL_INTERVAL_SEC=900  # 15 minutes
MIN_ALERT_SCORE=12

# -----------------------------------------------------------------------------
# External API Keys
# -----------------------------------------------------------------------------
# OpenAI API (Required for LLM analysis)
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4o-mini

# Optional: NewsAPI for additional news sources
NEWSAPI_KEY=your-newsapi-key-here

# Optional: AlphaVantage for additional market data
ALPHAVANTAGE_KEY=your-alphavantage-key-here

# Optional: Polygon.io for market data
POLYGON_API_KEY=your-polygon-api-key-here
USE_PRICE_SOURCE=yahoo  # Options: yahoo, polygon

# -----------------------------------------------------------------------------
# Email Configuration (Required for reports and alerts)
# -----------------------------------------------------------------------------
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-specific-password
ALERT_EMAIL_TO=alerts@yourdomain.com

# -----------------------------------------------------------------------------
# Slack Notifications (Optional but recommended)
# -----------------------------------------------------------------------------
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# -----------------------------------------------------------------------------
# Daily Opportunities Report
# -----------------------------------------------------------------------------
# JSON array of email addresses
REPORT_RECIPIENTS=["analyst1@yourdomain.com","analyst2@yourdomain.com","team@yourdomain.com"]
REPORT_MIN_CONFIDENCE=0.70
REPORT_MIN_EXPECTED_RETURN_PCT=1.0
REPORT_MIN_R2=0.95
REPORT_MAX_TICKERS_PER_SIDE=8

# Enable PDF attachment (requires WeasyPrint)
ENABLE_REPORT_PDF=false

# -----------------------------------------------------------------------------
# Intraday Trading
# -----------------------------------------------------------------------------
INTRADAY_INTERVAL=1m  # 1m, 5m, 15m, 30m, 1h
INTRADAY_HORIZONS=5,15  # Comma-separated prediction horizons (minutes)
BOUNDS_QUANTILES=0.1,0.9  # Lower and upper quantiles
PREDICT_STORE_DB=true  # Store predictions in database

# -----------------------------------------------------------------------------
# Admin Access
# -----------------------------------------------------------------------------
# Generate admin token: python -c "from app.core.secrets import SecretsValidator; print(SecretsValidator.generate_secret_key(32))"
ADMIN_TOKEN=REPLACE_WITH_32_CHAR_ADMIN_TOKEN

# -----------------------------------------------------------------------------
# CORS (Frontend Origins)
# -----------------------------------------------------------------------------
# JSON array of allowed origins
CORS_ORIGINS=["https://app.yourdomain.com","https://www.yourdomain.com"]

# -----------------------------------------------------------------------------
# Monitoring & Observability
# -----------------------------------------------------------------------------
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
LOG_LEVEL=INFO

# Sentry DSN for error tracking (highly recommended)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# -----------------------------------------------------------------------------
# Feature Flags (Optional)
# -----------------------------------------------------------------------------
# Control feature availability
ENABLE_ML_PREDICTIONS=true
ENABLE_WEBSOCKET_STREAMING=true
ENABLE_INTRADAY_TRADING=true

# =============================================================================
# Security Checklist Before Deployment:
# =============================================================================
# [ ] All secrets replaced with production values
# [ ] JWT_SECRET_KEY is 64+ characters
# [ ] POSTGRES_PASSWORD is 32+ characters
# [ ] REQUIRE_AUTH is set to true
# [ ] ALLOW_REGISTRATION is false (after admin creation)
# [ ] CORS_ORIGINS contains only production domains
# [ ] SENTRY_DSN is configured
# [ ] All API keys are valid and have proper rate limits
# [ ] Email/Slack notifications tested
# [ ] Database backups configured
# [ ] SSL/TLS certificates installed
# =============================================================================
